{"version":3,"file":"filter-motion-blur.cjs.js","sources":["../src/MotionBlurFilter.js"],"sourcesContent":["import {vertex} from '@tools/fragments';\nimport fragment from './motion-blur.frag';\nimport {Filter} from '@pixi/core';\nimport {ObservablePoint, Point} from '@pixi/math';\n\n/**\n * The MotionBlurFilter applies a Motion blur to an object.<br>\n * ![original](../tools/screenshots/dist/original.png)![filter](../tools/screenshots/dist/motion-blur.png)\n *\n * @class\n * @extends PIXI.Filter\n * @memberof PIXI.filters\n * @see {@link https://www.npmjs.com/package/@pixi/filter-motion-blur|@pixi/filter-motion-blur}\n * @see {@link https://www.npmjs.com/package/pixi-filters|pixi-filters}\n * @param {PIXI.ObservablePoint|PIXI.Point|number[]} [velocity=[0, 0]] Sets the velocity of the motion for blur effect.\n * @param {number} [kernelSize=5] - The kernelSize of the blur filter. Must be odd number >= 5\n * @param {number} [offset=0] - The offset of the blur filter.\n */\nclass MotionBlurFilter extends Filter {\n    constructor(velocity = [0, 0], kernelSize = 5, offset = 0) {\n        super(vertex, fragment);\n        this.uniforms.uVelocity = new Float32Array(2);\n        this._velocity = new ObservablePoint(this.velocityChanged, this);\n        this.velocity = velocity;\n\n        /**\n         * The kernelSize of the blur, higher values are slower but look better.\n         * Use odd value greater than 5.\n         * @member {number}\n         * @default 5\n         */\n        this.kernelSize = kernelSize;\n        this.offset = offset;\n    }\n\n    /**\n     * Override existing apply method in PIXI.Filter\n     * @private\n     */\n    apply(filterManager, input, output, clear) {\n        const {x, y} = this.velocity;\n\n        this.uniforms.uKernelSize = (x !== 0 || y !== 0) ? this.kernelSize : 0;\n        filterManager.applyFilter(this, input, output, clear);\n    }\n\n    /**\n     * Sets the velocity of the motion for blur effect.\n     *\n     * @member {PIXI.ObservablePoint}\n     */\n    set velocity(value) {\n        if (Array.isArray(value)) {\n            this._velocity.set(value[0], value[1]);\n        }\n        else if (value instanceof Point || value instanceof ObservablePoint) {\n            this._velocity.copy(value);\n        }\n    }\n\n    get velocity() {\n        return this._velocity;\n    }\n\n    /**\n     * Handle velocity changed\n     * @private\n     */\n    velocityChanged() {\n        this.uniforms.uVelocity[0] = this._velocity.x;\n        this.uniforms.uVelocity[1] = this._velocity.y;\n    }\n\n    /**\n     * The offset of the blur filter.\n     *\n     * @member {number}\n     * @default 0\n     */\n    set offset(value) {\n        this.uniforms.uOffset = value;\n    }\n\n    get offset() {\n        return this.uniforms.uOffset;\n    }\n}\n\nexport { MotionBlurFilter };\n\n"],"names":["super","ObservablePoint","Point","Filter"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkBA,IAAM,gBAAgB;IAClB,yBAAW,CAAC,QAAiB,EAAE,UAAc,EAAE,MAAU,EAAE;2CAAvC,GAAG,CAAC,CAAC,EAAE,CAAC;+CAAa,GAAG;uCAAS,GAAG;;QACpDA,WAAK,OAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;QACxB,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC;QAC9C,IAAI,CAAC,SAAS,GAAG,IAAIC,oBAAe,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;QACjE,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;;;;;;;;QAQzB,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAC7B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;;;;;;;iGACxB;;;;;;+BAMD,wBAAM,aAAa,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE;QACvC,OAAY,GAAG,IAAI,CAAC;QAAb;QAAG,cAAmB;;QAE7B,IAAI,CAAC,QAAQ,CAAC,WAAW,GAAG,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACvE,aAAa,CAAC,WAAW,CAAC,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;MACzD;;;;;;;IAOD,mBAAI,yBAAS,KAAK,EAAE;QAChB,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;YACtB,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;SAC1C;aACI,IAAI,KAAK,YAAYC,UAAK,IAAI,KAAK,YAAYD,oBAAe,EAAE;YACjE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SAC9B;MACJ;;IAED,mBAAI,2BAAW;QACX,OAAO,IAAI,CAAC,SAAS,CAAC;MACzB;;;;;;+BAMD,8CAAkB;QACd,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;QAC9C,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;MACjD;;;;;;;;IAQD,mBAAI,uBAAO,KAAK,EAAE;QACd,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,KAAK,CAAC;MACjC;;IAED,mBAAI,yBAAS;QACT,OAAO,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC;KAChC;;;;;EAnE0BE;;;;"}