{"version":3,"file":"filter-color-replace.js","sources":["../src/ColorReplaceFilter.js"],"sourcesContent":["import {vertex} from '@tools/fragments';\nimport fragment from './colorReplace.frag';\nimport {Filter} from '@pixi/core';\nimport {hex2rgb, rgb2hex} from '@pixi/utils';\n\n/**\n * ColorReplaceFilter, originally by mishaa, updated by timetocode\n * http://www.html5gamedevs.com/topic/10640-outline-a-sprite-change-certain-colors/?p=69966<br>\n * ![original](../tools/screenshots/dist/original.png)![filter](../tools/screenshots/dist/color-replace.png)\n *\n * @class\n * @extends PIXI.Filter\n * @memberof PIXI.filters\n * @see {@link https://www.npmjs.com/package/@pixi/filter-color-replace|@pixi/filter-color-replace}\n * @see {@link https://www.npmjs.com/package/pixi-filters|pixi-filters}\n * @param {number|Array<number>} [originalColor=0xFF0000] The color that will be changed, as a 3 component RGB e.g. [1.0, 1.0, 1.0]\n * @param {number|Array<number>} [newColor=0x000000] The resulting color, as a 3 component RGB e.g. [1.0, 0.5, 1.0]\n * @param {number} [epsilon=0.4] Tolerance/sensitivity of the floating-point comparison between colors (lower = more exact, higher = more inclusive)\n *\n * @example\n *  // replaces true red with true blue\n *  someSprite.filters = [new ColorReplaceFilter(\n *   [1, 0, 0],\n *   [0, 0, 1],\n *   0.001\n *   )];\n *  // replaces the RGB color 220, 220, 220 with the RGB color 225, 200, 215\n *  someOtherSprite.filters = [new ColorReplaceFilter(\n *   [220/255.0, 220/255.0, 220/255.0],\n *   [225/255.0, 200/255.0, 215/255.0],\n *   0.001\n *   )];\n *  // replaces the RGB color 220, 220, 220 with the RGB color 225, 200, 215\n *  someOtherSprite.filters = [new ColorReplaceFilter(0xdcdcdc, 0xe1c8d7, 0.001)];\n *\n */\nclass ColorReplaceFilter extends Filter {\n\n    constructor(originalColor = 0xFF0000, newColor = 0x000000, epsilon = 0.4) {\n        super(vertex, fragment);\n        this.uniforms.originalColor = new Float32Array(3);\n        this.uniforms.newColor = new Float32Array(3);\n        this.originalColor = originalColor;\n        this.newColor = newColor;\n        this.epsilon = epsilon;\n    }\n\n    /**\n     * The color that will be changed, as a 3 component RGB e.g. [1.0, 1.0, 1.0]\n     * @member {number|Array<number>}\n     * @default 0xFF0000\n     */\n    set originalColor(value) {\n        let arr = this.uniforms.originalColor;\n        if (typeof value === 'number') {\n            hex2rgb(value, arr);\n            this._originalColor = value;\n        }\n        else {\n            arr[0] = value[0];\n            arr[1] = value[1];\n            arr[2] = value[2];\n            this._originalColor = rgb2hex(arr);\n        }\n    }\n    get originalColor() {\n        return this._originalColor;\n    }\n\n    /**\n     * The resulting color, as a 3 component RGB e.g. [1.0, 0.5, 1.0]\n     * @member {number|Array<number>}\n     * @default 0x000000\n     */\n    set newColor(value) {\n        let arr = this.uniforms.newColor;\n        if (typeof value === 'number') {\n            hex2rgb(value, arr);\n            this._newColor = value;\n        }\n        else {\n            arr[0] = value[0];\n            arr[1] = value[1];\n            arr[2] = value[2];\n            this._newColor = rgb2hex(arr);\n        }\n    }\n    get newColor() {\n        return this._newColor;\n    }\n\n    /**\n     * Tolerance/sensitivity of the floating-point comparison between colors (lower = more exact, higher = more inclusive)\n     * @member {number}\n     * @default 0.4\n     */\n    set epsilon(value) {\n        this.uniforms.epsilon = value;\n    }\n    get epsilon() {\n        return this.uniforms.epsilon;\n    }\n}\n\nexport { ColorReplaceFilter };\n"],"names":["ColorReplaceFilter","originalColor","newColor","epsilon","super","vertex","fragment","this","uniforms","Float32Array","prototypeAccessors","value","let","arr","hex2rgb","_originalColor","rgb2hex","_newColor","Filter"],"mappings":";;;;;;;41BAoCMA,cAEF,WAAYC,EAA0BC,EAAqBC,kBAA/B,yBAAqB,kBAAoB,IACjEC,YAAMC,EAAQC,GACdC,KAAKC,SAASP,cAAgB,IAAIQ,aAAa,GAC/CF,KAAKC,SAASN,SAAW,IAAIO,aAAa,GAC1CF,KAAKN,cAAgBA,EACrBM,KAAKL,SAAWA,EAChBK,KAAKJ,QAAUA,6LAQnBO,EAAIT,2BAAcU,GACdC,IAAIC,EAAMN,KAAKC,SAASP,cACH,iBAAVU,GACPG,UAAQH,EAAOE,GACfN,KAAKQ,eAAiBJ,IAGtBE,EAAI,GAAKF,EAAM,GACfE,EAAI,GAAKF,EAAM,GACfE,EAAI,GAAKF,EAAM,GACfJ,KAAKQ,eAAiBC,UAAQH,KAGtCH,EAAIT,6BACA,OAAOM,KAAKQ,gBAQhBL,EAAIR,sBAASS,GACTC,IAAIC,EAAMN,KAAKC,SAASN,SACH,iBAAVS,GACPG,UAAQH,EAAOE,GACfN,KAAKU,UAAYN,IAGjBE,EAAI,GAAKF,EAAM,GACfE,EAAI,GAAKF,EAAM,GACfE,EAAI,GAAKF,EAAM,GACfJ,KAAKU,UAAYD,UAAQH,KAGjCH,EAAIR,wBACA,OAAOK,KAAKU,WAQhBP,EAAIP,qBAAQQ,GACRJ,KAAKC,SAASL,QAAUQ,GAE5BD,EAAIP,uBACA,OAAOI,KAAKC,SAASL,mDAhEIe"}