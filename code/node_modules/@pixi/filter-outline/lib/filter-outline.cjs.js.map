{"version":3,"file":"filter-outline.cjs.js","sources":["../src/OutlineFilter.js"],"sourcesContent":["import {vertex} from '@tools/fragments';\nimport fragment from './outline.frag';\nimport {Filter} from '@pixi/core';\nimport {rgb2hex, hex2rgb} from '@pixi/utils';\n\n/**\n * OutlineFilter, originally by mishaa\n * http://www.html5gamedevs.com/topic/10640-outline-a-sprite-change-certain-colors/?p=69966\n * http://codepen.io/mishaa/pen/emGNRB<br>\n * ![original](../tools/screenshots/dist/original.png)![filter](../tools/screenshots/dist/outline.png)\n *\n * @class\n * @extends PIXI.Filter\n * @memberof PIXI.filters\n * @see {@link https://www.npmjs.com/package/@pixi/filter-outline|@pixi/filter-outline}\n * @see {@link https://www.npmjs.com/package/pixi-filters|pixi-filters}\n * @param {number} [thickness=1] The tickness of the outline. Make it 2 times more for resolution 2\n * @param {number} [color=0x000000] The color of the outline.\n * @param {number} [quality=0.1] The quality of the outline from `0` to `1`, using a higher quality\n *        setting will result in slower performance and more accuracy.\n *\n * @example\n *  someSprite.shader = new OutlineFilter(9, 0xFF0000);\n */\nclass OutlineFilter extends Filter {\n\n    constructor(thickness = 1, color = 0x000000, quality = 0.1) {\n        const samples =  Math.max(\n            quality * OutlineFilter.MAX_SAMPLES,\n            OutlineFilter.MIN_SAMPLES\n        );\n        const angleStep = (Math.PI * 2 / samples).toFixed(7);\n\n        super(vertex, fragment.replace(/\\$\\{angleStep\\}/, angleStep));\n        this.uniforms.thickness = new Float32Array([0, 0]);\n\n        /**\n         * The thickness of the outline.\n         * @member {number}\n         * @default 1\n         */\n        this.thickness = thickness;\n\n        this.uniforms.outlineColor = new Float32Array([0, 0, 0, 1]);\n        this.color = color;\n\n        this.quality = quality;\n    }\n\n    apply(filterManager, input, output, clear) {\n        this.uniforms.thickness[0] = this.thickness / input._frame.width;\n        this.uniforms.thickness[1] = this.thickness / input._frame.height;\n\n        filterManager.applyFilter(this, input, output, clear);\n    }\n\n    /**\n     * The color of the glow.\n     * @member {number}\n     * @default 0x000000\n     */\n    get color() {\n        return rgb2hex(this.uniforms.outlineColor);\n    }\n    set color(value) {\n        hex2rgb(value, this.uniforms.outlineColor);\n    }\n}\n\n/**\n * The minimum number of samples for rendering outline.\n * @static\n * @member {number} MIN_SAMPLES\n * @memberof PIXI.filters.OutlineFilter\n * @default 1\n */\nOutlineFilter.MIN_SAMPLES = 1;\n\n/**\n * The maximum number of samples for rendering outline.\n * @static\n * @member {number} MAX_SAMPLES\n * @memberof PIXI.filters.OutlineFilter\n * @default 100\n */\nOutlineFilter.MAX_SAMPLES = 100;\n\nexport { OutlineFilter };\n"],"names":["const","super","rgb2hex","hex2rgb","Filter"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwBA,IAAM,aAAa;IAEf,sBAAW,CAAC,SAAa,EAAE,KAAgB,EAAE,OAAa,EAAE;6CAAvC,GAAG;qCAAQ,GAAG;yCAAiB,GAAG;;QACnDA,IAAM,OAAO,IAAI,IAAI,CAAC,GAAG;YACrB,OAAO,GAAG,aAAa,CAAC,WAAW;YACnC,aAAa,CAAC,WAAW;SAC5B,CAAC;QACFA,IAAM,SAAS,GAAG,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,GAAG,OAAO,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC;;QAErDC,WAAK,OAAC,MAAM,EAAE,QAAQ,CAAC,OAAO,CAAC,iBAAiB,EAAE,SAAS,CAAC,CAAC,CAAC;QAC9D,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,IAAI,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;;;;;;;QAOnD,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;;QAE3B,IAAI,CAAC,QAAQ,CAAC,YAAY,GAAG,IAAI,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QAC5D,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;;QAEnB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;;;;;;;+DAC1B;;4BAED,wBAAM,aAAa,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE;QACvC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC;QACjE,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC;;QAElE,aAAa,CAAC,WAAW,CAAC,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;MACzD;;;;;;;IAOD,mBAAI,wBAAQ;QACR,OAAOC,aAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;MAC9C;IACD,mBAAI,sBAAM,KAAK,EAAE;QACbC,aAAO,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;KAC9C;;;;;EA1CuBC,cA2C3B;;;;;;;;;AASD,aAAa,CAAC,WAAW,GAAG,CAAC,CAAC;;;;;;;;;AAS9B,aAAa,CAAC,WAAW,GAAG,GAAG,CAAC;;;;"}